<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Satirical Corporate Toolkit</title>
    <meta name="theme-color" content="#000000" />

    <!-- Link to the Web App Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- SEO Meta Tags -->
    <meta name="description"
        content="A satirical AI toolkit for the modern corporate warrior. Translate BS, explain buzzwords, generate jargon, and sanitize your rants into HR-approved emails.">
    <meta name="keywords"
        content="corporate humor, satire, business jargon, AI tool, Gemini API, project generator, HR speak, corporate translator">
    <meta name="author" content="FOREPHEMERAL.RUN.PLACE">
    <link rel="canonical" href="https://FOREPHEMERAL.RUN.PLACE">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://FOREPHEMERAL.RUN.PLACE">
    <meta property="og:title" content="Satirical Corporate Toolkit">
    <meta property="og:description"
        content="A satirical AI toolkit for the modern corporate warrior. Translate BS, explain buzzwords, generate jargon, and sanitize your rants into HR-approved emails.">
    <meta property="og:image" content="https://placehold.co/1200x630/000000/FFFFFF?text=Satirical+Corporate+Toolkit">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://FOREPHEMERAL.RUN.PLACE">
    <meta property="twitter:title" content="Satirical Corporate Toolkit">
    <meta property="twitter:description"
        content="A satirical AI toolkit for the modern corporate warrior. Translate BS, explain buzzwords, generate jargon, and sanitize your rants into HR-approved emails.">
    <meta property="twitter:image"
        content="https://placehold.co/1200x630/000000/FFFFFF?text=Satirical+Corporate+Toolkit">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .brutalist-shadow {
            box-shadow: 8px 8px 0px #000;
        }

        .brutalist-border {
            border: 3px solid #000;
        }

        /* Tab Navigation Styles */
        .tab-btn {
            /* flex-1 makes buttons take equal width. flex-col stacks icon/text. */
            flex: 1 1 0%;
            padding-left: 1rem;
            padding-right: 1rem;
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;
            font-weight: 700;
            color: #6b7280; /* text-gray-500 */
            border-bottom-width: 4px;
            border-bottom-color: transparent;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.25rem;
            transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
            transition-duration: 200ms;
        }

        .tab-btn:hover {
            /* Subtle hover effect */
            background-color: #f3f4f6; /* bg-gray-100 */
            color: #000000; /* text-black */
        }

        .tab-btn.active {
            /* Active tab has a prominent black border and text */
            color: #000000; /* text-black */
            border-bottom-color: #000000; /* border-black */
        }
    </style>
</head>

<body class="bg-gray-100 text-gray-900 flex items-center justify-center min-h-screen p-4">
    <div class="w-full max-w-2xl mx-auto">

        <!-- Main Content Card -->
        <div class="bg-white rounded-lg brutalist-border brutalist-shadow">

            <!-- Tab Buttons Container -->
            <div class="flex border-b-2 border-black">
                <button id="generatorTab" class="tab-btn active">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path
                            d="M9.06 2.31a8.34 8.34 0 0 1 11.27 4.09 8.34 8.34 0 0 1-4.09 11.27 8.34 8.34 0 0 1-11.27-4.09A8.34 8.34 0 0 1 9.06 2.31z" />
                        <path d="M15.42 12a3.42 3.42 0 1 0-4.84 4.84" />
                        <path d="M12 22v-2" />
                        <path d="M12 4V2" />
                        <path d="m4.93 4.93 1.41 1.41" />
                        <path d="m17.66 17.66 1.41 1.41" />
                        <path d="M2 12h2" />
                        <path d="M20 12h2" />
                        <path d="m4.93 19.07 1.41-1.41" />
                        <path d="m17.66 6.34 1.41-1.41" />
                    </svg>
                    <span>Jargonator</span>
                </button>
                <button id="translatorTab" class="tab-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="m5 8 6 6" />
                        <path d="m4 14 6-6 2-3" />
                        <path d="M2 5h12" />
                        <path d="M7 2h1" />
                        <path d="m22 22-5-10-5 10" />
                        <path d="M14 18h6" />
                    </svg>
                    <span>Translator</span>
                </button>
                <button id="explainerTab" class="tab-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20" />
                        <path d="M10 10a3 3 0 1 0-3-3" />
                        <path d="M12 18a3 3 0 0 0-3-3 3 3 0 0 0-3 3" />
                    </svg>
                    <span>Explainer</span>
                </button>
                <button id="hrShieldTab" class="tab-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                    </svg>
                    <span>HR Shield</span>
                </button>
            </div>

            <div class="p-6 md:p-8">
                <!-- Generator Section -->
                <div id="generatorSection">
                    <header class="text-center mb-6">
                        <h1 class="text-3xl md:text-4xl font-bold mb-2">The Jargonator 5000</h1>
                        <p class="text-gray-600">Enter a buzzword. Get a revolutionary project idea. Instantly.</p>
                    </header>
                    <main>
                        <div class="flex flex-col sm:flex-row gap-4 mb-4">
                            <input type="text" id="jargonInput" placeholder="e.g., 'Synergy', 'Leverage'"
                                class="flex-grow w-full px-4 py-3 rounded-md brutalist-border focus:outline-none focus:ring-2 focus:ring-black">
                            <button id="generateBtn"
                                class="bg-black text-white font-bold py-3 px-6 rounded-md brutalist-border hover:bg-gray-800 transition-colors w-full sm:w-auto">
                                Generate
                            </button>
                        </div>
                    </main>
                </div>

                <!-- Translator Section -->
                <div id="translatorSection" class="hidden">
                    <header class="text-center mb-6">
                        <h1 class="text-3xl md:text-4xl font-bold mb-2">Corporate BS Translator</h1>
                        <p class="text-gray-600">Paste in that jargon-filled email. Find out what they *really* mean.
                        </p>
                    </header>
                    <main>
                        <textarea id="jargonTextarea"
                            class="w-full p-4 rounded-md brutalist-border focus:outline-none focus:ring-2 focus:ring-black"
                            rows="6" placeholder="Paste your corporate-speak here..."></textarea>
                        <button id="translateBtn"
                            class="bg-black text-white font-bold py-3 px-6 rounded-md brutalist-border hover:bg-gray-800 transition-colors w-full mt-4">
                            âœ¨ Translate the BS
                        </button>
                    </main>
                </div>

                <!-- Explainer Section -->
                <div id="explainerSection" class="hidden">
                    <header class="text-center mb-6">
                        <h1 class="text-3xl md:text-4xl font-bold mb-2">Buzzword Explainer</h1>
                        <p class="text-gray-600">Find out what that buzzword *actually* means. Or doesn't.</p>
                    </header>
                    <main>
                        <div class="flex flex-col sm:flex-row gap-4 mb-4">
                            <input type="text" id="buzzwordInput" placeholder="e.g., 'Circle Back', 'Low-Hanging Fruit'"
                                class="flex-grow w-full px-4 py-3 rounded-md brutalist-border focus:outline-none focus:ring-2 focus:ring-black">
                            <button id="explainBtn"
                                class="bg-black text-white font-bold py-3 px-6 rounded-md brutalist-border hover:bg-gray-800 transition-colors w-full sm:w-auto">
                                Explain
                            </button>
                        </div>
                    </main>
                </div>

                <!-- HR Shield Section -->
                <div id="hrShieldSection" class="hidden">
                    <header class="text-center mb-6">
                        <h1 class="text-3xl md:text-4xl font-bold mb-2">HR Shield</h1>
                        <p class="text-gray-600">Translate your unfiltered thoughts into HR-approved corporate speak.
                        </p>
                    </header>
                    <main>
                        <textarea id="hrInput"
                            class="w-full p-4 rounded-md brutalist-border focus:outline-none focus:ring-2 focus:ring-black"
                            rows="6" placeholder="Type what you *really* want to say..."></textarea>
                        <button id="sanitizeBtn"
                            class="bg-black text-white font-bold py-3 px-6 rounded-md brutalist-border hover:bg-gray-800 transition-colors w-full mt-4">
                            Make it Corporate
                        </button>
                    </main>
                </div>

                <!-- Shared Sections (CAPTCHA, Results, Errors) -->
                <div class="flex items-center justify-center gap-2 my-6">
                    <label for="captchaInput" id="captchaLabel" class="font-medium text-gray-700">Please solve: </label>
                    <input type="number" id="captchaInput"
                        class="w-24 px-3 py-2 text-center rounded-md brutalist-border focus:outline-none focus:ring-2 focus:ring-black"
                        placeholder="?">
                </div>

                <div id="resultContainer" class="hidden">
                    <div id="loader" class="text-center hidden my-8">
                        <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-black">
                        </div>
                        <p class="mt-2 text-gray-600">Synthesizing corporate synergy...</p>
                    </div>
                    <div id="output" class="bg-gray-50 p-6 rounded-lg brutalist-border mt-4 whitespace-pre-wrap">
                        <!-- Generated content will appear here -->
                    </div>
                </div>

                <div id="errorContainer" class="hidden mt-4 text-center">
                    <div class="bg-red-100 border-2 border-red-500 text-red-700 px-4 py-3 rounded-md">
                        <strong class="font-bold">Heads up!</strong>
                        <span id="errorMessage" class="block sm:inline"></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- API Key Management Section -->
        <div class="bg-white rounded-lg brutalist-border brutalist-shadow p-6 md:p-8 mt-6">
            <h2 class="text-xl font-bold mb-3">API Key Management</h2>
            <p class="text-gray-600 mb-4">Your API key is saved in your browser's local storage and is never sent
                anywhere else.</p>
            <div class="flex flex-col sm:flex-row gap-4">
                <input type="password" id="apiKeyInput" placeholder="Enter your Gemini API Key"
                    class="flex-grow w-full px-4 py-3 rounded-md brutalist-border focus:outline-none focus:ring-2 focus:ring-black">
                <button id="saveApiKeyBtn"
                    class="bg-blue-600 text-white font-bold py-3 px-6 rounded-md brutalist-border hover:bg-blue-700 transition-colors w-full sm:w-auto">
                    Save Key
                </button>
            </div>
            <div id="apiKeyMessage" class="text-green-600 font-medium mt-3 hidden"></div>
        </div>

        <footer class="text-center mt-6 text-gray-500 text-sm">
            <p>&copy; 2025 FOREPHEMERAL.RUN.PLACE. A brutally honest corporate toolkit.</p>
        </footer>
    </div>

    <script>
        // --- Service Worker Registration ---
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js').then(registration => {
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                }, err => {
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }

        // --- DOM Elements ---
        const generatorTab = document.getElementById('generatorTab');
        const translatorTab = document.getElementById('translatorTab');
        const explainerTab = document.getElementById('explainerTab');
        const hrShieldTab = document.getElementById('hrShieldTab');
        const generatorSection = document.getElementById('generatorSection');
        const translatorSection = document.getElementById('translatorSection');
        const explainerSection = document.getElementById('explainerSection');
        const hrShieldSection = document.getElementById('hrShieldSection');

        const generateBtn = document.getElementById('generateBtn');
        const jargonInput = document.getElementById('jargonInput');
        const translateBtn = document.getElementById('translateBtn');
        const jargonTextarea = document.getElementById('jargonTextarea');
        const explainBtn = document.getElementById('explainBtn');
        const buzzwordInput = document.getElementById('buzzwordInput');
        const sanitizeBtn = document.getElementById('sanitizeBtn');
        const hrInput = document.getElementById('hrInput');

        const resultContainer = document.getElementById('resultContainer');
        const loader = document.getElementById('loader');
        const output = document.getElementById('output');
        const errorContainer = document.getElementById('errorContainer');
        const errorMessage = document.getElementById('errorMessage');
        const apiKeyInput = document.getElementById('apiKeyInput');
        const saveApiKeyBtn = document.getElementById('saveApiKeyBtn');
        const apiKeyMessage = document.getElementById('apiKeyMessage');
        const captchaLabel = document.getElementById('captchaLabel');
        const captchaInput = document.getElementById('captchaInput');

        // --- State ---
        let lastCallTime = 0;
        const cooldown = 5000; // 5 seconds
        let captchaAnswer = 0;
        const loadingMessages = [
            "Synthesizing corporate synergy...", "Aligning paradigms...", "Leveraging disruptive technologies...",
            "Optimizing value chains...", "Unpacking core competencies...", "Empowering holistic frameworks...",
            "Iterating on impactful solutions..."
        ];

        // --- Event Listeners ---
        window.addEventListener('load', () => {
            loadApiKey();
            generateCaptcha();
        });

        generatorTab.addEventListener('click', () => switchTab('generator'));
        translatorTab.addEventListener('click', () => switchTab('translator'));
        explainerTab.addEventListener('click', () => switchTab('explainer'));
        hrShieldTab.addEventListener('click', () => switchTab('hrShield'));

        saveApiKeyBtn.addEventListener('click', saveApiKey);
        generateBtn.addEventListener('click', generateProject);
        translateBtn.addEventListener('click', translateJargon);
        explainBtn.addEventListener('click', explainBuzzword);
        sanitizeBtn.addEventListener('click', sanitizeInput);

        jargonInput.addEventListener('keyup', (event) => {
            if (event.key === 'Enter') generateProject();
        });
        buzzwordInput.addEventListener('keyup', (event) => {
            if (event.key === 'Enter') explainBuzzword();
        });

        // --- Tab Switching ---
        function switchTab(tabName) {
            const tabs = {
                generator: { btn: generatorTab, section: generatorSection },
                translator: { btn: translatorTab, section: translatorSection },
                explainer: { btn: explainerTab, section: explainerSection },
                hrShield: { btn: hrShieldTab, section: hrShieldSection }
            };

            for (const key in tabs) {
                if (key === tabName) {
                    tabs[key].section.classList.remove('hidden');
                    tabs[key].btn.classList.add('active');
                } else {
                    tabs[key].section.classList.add('hidden');
                    tabs[key].btn.classList.remove('active');
                }
            }
            resultContainer.classList.add('hidden');
            errorContainer.classList.add('hidden');
        }

        // --- API Key Functions ---
        function saveApiKey() {
            const key = apiKeyInput.value.trim();
            if (key) {
                localStorage.setItem('geminiApiKey', key);
                apiKeyMessage.textContent = 'API Key saved successfully!';
                apiKeyMessage.classList.remove('hidden', 'text-red-600');
                apiKeyMessage.classList.add('text-green-600');
                setTimeout(() => apiKeyMessage.classList.add('hidden'), 3000);
            } else {
                apiKeyMessage.textContent = 'Please enter a valid API Key.';
                apiKeyMessage.classList.remove('hidden', 'text-green-600');
                apiKeyMessage.classList.add('text-red-600');
            }
        }

        function loadApiKey() {
            const key = localStorage.getItem('geminiApiKey');
            if (key) apiKeyInput.value = key;
        }

        function getApiKey() {
            return localStorage.getItem('geminiApiKey');
        }

        // --- CAPTCHA Function ---
        function generateCaptcha() {
            const num1 = Math.floor(Math.random() * 10) + 1;
            const num2 = Math.floor(Math.random() * 10) + 1;
            captchaAnswer = num1 + num2;
            captchaLabel.textContent = `Please solve: ${num1} + ${num2} =`;
            captchaInput.value = '';
        }

        // --- Pre-API Call Validation ---
        function preApiCheck() {
            const userAnswer = parseInt(captchaInput.value, 10);
            if (userAnswer !== captchaAnswer) {
                showError("Incorrect CAPTCHA answer. Please try again.");
                generateCaptcha();
                return false;
            }

            const now = Date.now();
            if (now - lastCallTime < cooldown) {
                const timeLeft = Math.ceil((cooldown - (now - lastCallTime)) / 1000);
                showError(`Please wait ${timeLeft} more seconds.`);
                return false;
            }

            const apiKey = getApiKey();
            if (!apiKey) {
                showError("API Key not found. Please save your API key below.");
                return false;
            }

            return true;
        }

        // --- Core Gemini API Call Function ---
        async function callGemini(systemPrompt, userQuery, button) {
            showLoader();
            hideError();
            button.disabled = true;

            try {
                const apiKey = getApiKey();
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                const payload = {
                    contents: [{ parts: [{ text: userQuery }] }],
                    systemInstruction: { parts: [{ text: systemPrompt }] },
                };

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    const errorData = await response.json().catch(() => null);
                    if (response.status === 400 && errorData?.error?.message.includes('API key not valid')) {
                        throw new Error("The saved API key is not valid. Please enter a correct one.");
                    }
                    throw new Error(errorData?.error?.message || `API request failed with status ${response.status}.`);
                }

                const result = await response.json();
                const candidate = result.candidates?.[0];

                if (candidate && candidate.content?.parts?.[0]?.text) {
                    return candidate.content.parts[0].text;
                } else {
                    throw new Error("Invalid response structure from the API.");
                }

            } catch (error) {
                console.error("Error Details:", error);
                let userMessage = error.message || "An unexpected error occurred.";
                if (error instanceof TypeError) {
                    userMessage = "A network error occurred. Check your internet connection.";
                }
                showError(userMessage);
                return null;
            } finally {
                hideLoader();
                button.disabled = false;
                lastCallTime = Date.now();
                generateCaptcha();
            }
        }

        // --- Feature-Specific Logic ---
        async function generateProject() {
            if (!preApiCheck()) return;

            const jargon = jargonInput.value.trim();
            if (!jargon) {
                showError("Please enter a technical term or jargon.");
                return;
            }

            const systemPrompt = `You are a jaded but witty corporate comedian AI. Your job is to take a user's business jargon and turn it into a setup/punchline joke. The setup should sound like a genuine question from a pointless meeting. The punchline should be short, sharp, and cynical. The entire response should be two lines.

            Generate a response with ONLY the following structure:
            **Setup:** [The setup question]
            **Punchline:** [The punchline]`;
            const userQuery = `Generate a satirical joke based on the term: "${jargon}"`;

            const result = await callGemini(systemPrompt, userQuery, generateBtn);
            if (result) displayJoke(result);
        }

        async function translateJargon() {
            if (!preApiCheck()) return;

            const jargon = jargonTextarea.value.trim();
            if (!jargon) {
                showError("Please paste some corporate text to translate.");
                return;
            }

            const systemPrompt = `You are the "Corporate BS Translator." Your job is to take corporate jargon and translate it into simple, brutally honest English. Be cynical, direct, and expose the underlying meaninglessness. Format the output with a "What they said:" section (quoting the original text) and a "What they meant:" section (your translation).`;
            const userQuery = `Translate the following corporate text: "${jargon}"`;

            const result = await callGemini(systemPrompt, userQuery, translateBtn);
            if (result) displayTranslation(result);
        }

        async function explainBuzzword() {
            if (!preApiCheck()) return;

            const buzzword = buzzwordInput.value.trim();
            if (!buzzword) {
                showError("Please enter a buzzword to explain.");
                return;
            }

            const systemPrompt = `You are a cynical corporate lexicographer. Your job is to define business buzzwords. For each term, provide a "Standard Definition" (the official, sanitized meaning) and a "Real Definition" (the brutally honest, cynical truth). Keep the definitions concise and witty.`;
            const userQuery = `Define the buzzword: "${buzzword}"`;

            const result = await callGemini(systemPrompt, userQuery, explainBtn);
            if (result) displayExplanation(result);
        }

        async function sanitizeInput() {
            if (!preApiCheck()) return;

            const userInput = hrInput.value.trim();
            if (!userInput) {
                showError("Please enter the text you want to make corporate-friendly.");
                return;
            }

            const systemPrompt = `You are an expert HR communications professional and a master of corporate-speak, known as 'HR Shield'. Your task is to take a user's potentially blunt, unfiltered, or inappropriate message and rewrite it into a polite, professional, and HR-approved version that is safe for any corporate environment. The goal is to express the original intent clearly but diplomatically, removing any negativity, profanity, or unprofessional language. The final output should be a single, polished paragraph.`;
            const userQuery = `Please rewrite the following message to be corporate-friendly: "${userInput}"`;

            const result = await callGemini(systemPrompt, userQuery, sanitizeBtn);
            if (result) displaySanitizedText(result);
        }

        // --- UI Display Functions ---
        function showLoader() {
            const randomMessage = loadingMessages[Math.floor(Math.random() * loadingMessages.length)];
            loader.querySelector('p').textContent = randomMessage;
            resultContainer.classList.remove('hidden');
            loader.classList.remove('hidden');
            output.classList.add('hidden');
        }

        function hideLoader() {
            loader.classList.add('hidden');
        }

        function displayJoke(text) {
            let html = text
                .replace(/\*\*(Setup:)\*\* (.*)/g, '<p class="text-gray-600 text-lg mb-3">"$2"</p>')
                .replace(/\*\*(Punchline:)\*\* (.*)/g, '<p class="text-2xl font-bold text-black">$2</p>')
                .replace(/\n/g, '<br>');
            output.innerHTML = html;
            output.classList.remove('hidden');
        }

        function displayTranslation(text) {
            let html = text
                .replace(/What they said:/gi, '<strong class="font-bold text-gray-500">What they said:</strong>')
                .replace(/What they meant:/gi, '<strong class="font-bold text-black mt-4 block">What they meant:</strong>');
            output.innerHTML = html;
            output.classList.remove('hidden');
        }

        function displayExplanation(text) {
            let html = text
                .replace(/Standard Definition:/gi, '<strong class="font-bold text-gray-500">Standard Definition:</strong>')
                .replace(/Real Definition:/gi, '<strong class="font-bold text-black mt-4 block">Real Definition:</strong>');
            output.innerHTML = html;
            output.classList.remove('hidden');
        }

        function displaySanitizedText(text) {
            output.innerHTML = `<p class="text-lg">${text}</p>`;
            output.classList.remove('hidden');
        }

        function showError(message) {
            errorMessage.textContent = message;
            errorContainer.classList.remove('hidden');
        }

        function hideError() {
            errorContainer.classList.add('hidden');
        }
    </script>
</body>

</html>